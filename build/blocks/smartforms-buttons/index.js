(()=>{"use strict";var e,r={235:()=>{const e=window.wp.blocks,r=window.wp.i18n,t=window.wp.blockEditor,s=window.wp.components,l=window.wp.element,o=window.ReactJSXRuntime,a=[{label:"Option 1",value:"option-1"},{label:"Option 2",value:"option-2"}];(0,e.registerBlockType)("smartforms/buttons",{edit:({attributes:e,setAttributes:n,clientId:i})=>{const{label:u,helpText:p,requiredMessage:c,required:d,options:m,groupId:h,multiple:b}=e,f=(0,t.useBlockProps)();return(0,l.useEffect)((()=>{h||n({groupId:`sf-buttons-${i}`}),m&&Array.isArray(m)&&0!==m.length||n({options:a})}),[h,m,i,n]),(0,o.jsxs)("div",{...f,children:[(0,o.jsxs)(t.InspectorControls,{children:[(0,o.jsxs)(s.PanelBody,{title:(0,r.__)("Button Group Settings","smartforms"),children:[(0,o.jsx)(s.ToggleControl,{label:(0,r.__)("Required","smartforms"),checked:d,onChange:e=>n({required:e})}),d&&(0,o.jsx)(s.TextControl,{label:(0,r.__)("Required Message","smartforms"),value:c,onChange:e=>n({requiredMessage:e}),onBlur:()=>{""===c.trim()&&n({requiredMessage:"This field is required."})},placeholder:(0,r.__)("This field is required.","smartforms")}),(0,o.jsx)(s.TextControl,{label:(0,r.__)("Help Text","smartforms"),value:p,onChange:e=>n({helpText:e}),placeholder:(0,r.__)("Enter your help text","smartforms")}),(0,o.jsx)(s.ToggleControl,{label:(0,r.__)("Allow multiple selections","smartforms"),checked:b,onChange:e=>n({multiple:e,currentAnswer:e?[]:null})})]}),(0,o.jsxs)(s.PanelBody,{title:(0,r.__)("Button Options","smartforms"),initialOpen:!0,children:[m.map(((e,t)=>(0,o.jsxs)(l.Fragment,{children:[(0,o.jsx)(s.TextControl,{label:`${(0,r.__)("Option","smartforms")} ${t+1}`,value:e.label,onChange:e=>((e,r)=>{const t=m.map(((t,s)=>s===e?{label:r,value:r.toLowerCase().replace(/\s+/g,"-")}:t));n({options:t})})(t,e)}),(0,o.jsx)(s.Button,{isSecondary:!0,onClick:()=>(e=>{const r=m.filter(((r,t)=>t!==e));n({options:r})})(t),isSmall:!0,children:(0,r.__)("Remove Option","smartforms")})]},t))),(0,o.jsx)(s.Button,{isPrimary:!0,onClick:()=>{let e=0;m.forEach((r=>{const t=r.label.match(/^Option (\d+)$/);if(t){const r=parseInt(t[1],10);r>e&&(e=r)}}));const r=`Option ${e+1}`,t=r.toLowerCase().replace(/\s+/g,"-"),s=[...m,{label:r,value:t}];n({options:s})},children:(0,r.__)("Add Option","smartforms")})]})]}),(0,o.jsx)(t.RichText,{tagName:"label",className:"sf-buttons-main-label",value:u,onChange:e=>n({label:e}),placeholder:(0,r.__)("Type your question here...","smartforms")}),(0,o.jsx)("div",{className:"sf-buttons-group d-flex flex-wrap gap-2",role:"group","data-group-id":h,children:m.map(((r,t)=>{let s=!1;return s=b?Array.isArray(e.currentAnswer)&&e.currentAnswer.includes(r.value):e.currentAnswer===r.value,(0,o.jsx)("button",{type:"button",className:"btn btn-primary "+(s?"active":""),"data-value":r.value,onClick:()=>{if(b){let t=Array.isArray(e.currentAnswer)?[...e.currentAnswer]:[];t.includes(r.value)?t=t.filter((e=>e!==r.value)):t.push(r.value),n({currentAnswer:t})}else n({currentAnswer:r.value})},children:r.label},t)}))})]})},save:({attributes:e})=>{const{label:r,options:s,required:l,helpText:a,requiredMessage:n,groupId:i}=e,u=t.useBlockProps.save();return(0,o.jsxs)("div",{...u,children:[(0,o.jsx)("label",{className:"sf-buttons-main-label",children:r}),(0,o.jsx)("div",{className:"sf-buttons-group d-flex flex-wrap gap-2",role:"group","data-group-id":i,children:s.map(((e,r)=>(0,o.jsx)("button",{type:"button",className:"btn btn-primary","data-value":e.value,children:e.label},r)))}),(0,o.jsx)("input",{type:"hidden",name:i,required:l,"data-required-message":n})]})}})}},t={};function s(e){var l=t[e];if(void 0!==l)return l.exports;var o=t[e]={exports:{}};return r[e](o,o.exports,s),o.exports}s.m=r,e=[],s.O=(r,t,l,o)=>{if(!t){var a=1/0;for(p=0;p<e.length;p++){for(var[t,l,o]=e[p],n=!0,i=0;i<t.length;i++)(!1&o||a>=o)&&Object.keys(s.O).every((e=>s.O[e](t[i])))?t.splice(i--,1):(n=!1,o<a&&(a=o));if(n){e.splice(p--,1);var u=l();void 0!==u&&(r=u)}}return r}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[t,l,o]},s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={521:0,173:0};s.O.j=r=>0===e[r];var r=(r,t)=>{var l,o,[a,n,i]=t,u=0;if(a.some((r=>0!==e[r]))){for(l in n)s.o(n,l)&&(s.m[l]=n[l]);if(i)var p=i(s)}for(r&&r(t);u<a.length;u++)o=a[u],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(p)},t=globalThis.webpackChunksmartforms=globalThis.webpackChunksmartforms||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var l=s.O(void 0,[173],(()=>s(235)));l=s.O(l)})();